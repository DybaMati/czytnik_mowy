<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Nasluchiwanie cyfr</title>
<style>
body { font-family: Arial; padding: 20px; }
button { font-size: 18px; padding: 10px 20px; margin-top: 10px; }
table { border-collapse: collapse; margin-top: 20px; width: 100%; }
th, td { border: 1px solid #000; padding: 10px; font-size: 22px; text-align: center; }
</style>
</head>
<body>

<h2>Nasluchiwanie cyfr</h2>
<button id="start">ðŸŽ™ Rozpocznij nagrywanie</button>
<p id="info">Kliknij przycisk, aby nagraÄ‡ mowÄ™.</p>

<table id="table">
<tr><th>#</th><th>Numer</th></tr>
</table>

<script>
const map = { zero:"0", jeden:"1", dwa:"2", trzy:"3", cztery:"4", piec:"5", szesc:"6", siedem:"7", osiem:"8", dziewiec:"9" };
let counter = 1;
const table = document.getElementById("table");
const info = document.getElementById("info");

const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
if(!SpeechRecognition){
  info.textContent = "Twoja przeglÄ…darka nie wspiera rozpoznawania mowy. UÅ¼yj Safari na iPhone lub Chrome/Safari na komputerze.";
} else {
  const recognition = new SpeechRecognition();
  recognition.lang = "pl-PL";
  recognition.continuous = false;
  recognition.interimResults = false;

  document.getElementById("start").onclick = () => recognition.start();

  recognition.onstart = () => info.textContent = "Nagrywanieâ€¦ mÃ³w cyfry!";
  recognition.onend = () => info.textContent = "Kliknij przycisk, aby nagraÄ‡ ponownie.";

  recognition.onresult = (event) => {
    const text = event.results[0][0].transcript.toLowerCase();
    let digits = [];
    text.split(/\s+/).forEach(word => { if(map[word]) digits.push(map[word]); });
    digits = digits.slice(0,4);
    while(digits.length < 4) digits.push("-");
    const row = table.insertRow();
    row.insertCell().textContent = counter++;
    row.insertCell().textContent = digits.join("");
  };

  recognition.onerror = (e) => info.textContent = "BÅ‚Ä…d: " + e.error;
}
</script>

</body>
</html>
